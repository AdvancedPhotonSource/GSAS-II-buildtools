# new GitHub Action to test use of outputs

name: Compile MacOS
description: eventually this, I hope, will compile GSAS-II binaries on MacOS

outputs:
  tar-file:
    description: "tar file generated by script"
    value: ${{ steps.run.compile-step.tar-name }}

runs:
  using: "composite"

  steps:
#      - uses: fortran-lang/setup-fortran@v1
#        id: setup-fortran
#        with:
#          compiler: gcc
#          version: 13

      - name: Test save output
        id: compile-step
        shell: bash -l {0}
        run: |
           newdir=test-1234.tgz
           echo "tar-name=$(echo ${TMPFILE}${newdir})" >> $GITHUB_OUTPUT
           echo "tar-name=$(echo ${TMPFILE}${newdir})"

      - name: Read output
        shell: bash -l {0}
        run: echo "${{ steps.run.compile-step.tar-name }}"
